<style>
   .blink {
      animation: blink-animation 1s steps(2, start) infinite;
   }

   @keyframes blink-animation {
      to {
         visibility: hidden;
      }
   }

   .text-center small {
      font-size: 0.7em;
      line-height: 1.2;
   }

   .badge {
      font-size: 0.75em;
      margin: 2px 0;
   }

   .countdown-badge {
      font-family: 'Courier New', monospace;
      font-weight: bold;
      min-width: 80px;
      text-align: center;
   }

   .blink {
      animation: blink-animation 1s steps(2, start) infinite;
   }

   @keyframes blink-animation {
      to {
         visibility: hidden;
      }
   }

   .text-center small {
      font-size: 0.7em;
      line-height: 1.2;
   }

   .badge {
      font-size: 0.75em;
      margin: 2px 0;
   }

   .tooltip-inner {
      background-color: #333 !important;
      color: white !important;
      border-radius: 6px !important;
      padding: 8px 12px !important;
      font-size: 0.875rem !important;
      line-height: 1.4 !important;
   }

   .tooltip.show {
      opacity: 0.95 !important;
   }

   [data-bs-toggle="tooltip"] {
      cursor: help !important;
   }
</style>

<div class="_2JyLbpIPgPwI6RhYP28lbl mb-5">
   <div class="_12e1_3IHEVbMTMaTUzZ7r9">
      <table id="example" role="table" class="table">
         <thead>
            <tr role="row">

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Approved</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>ID</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Date</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>ID Offers</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Offer</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Geography / IP</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Device</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Status</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Income</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>VIEW </span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>VIEW2</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>VIEW3</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>VIEW4</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Pub_id</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>UserAgent</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Traffic Type</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Flag</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Sale_amount</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Channel url</span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Confirm Date </span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

               <th colspan="1" role="columnheader" title="Toggle SortBy" style="cursor: pointer;">
                  <div class="d-flex align-item-center justify-content-between">
                     <span>Pay Date </span>
                     <i class="fa fa-sort"></i>
                  </div>
               </th>

            </tr>
         </thead>
         <tbody role="rowgroup">
            <?php foreach ($data as $data) : ?>
               <?php
               if ($data->status == 1) {
                  $status = '<div style="background-color:#916800" class="_1zXei-ymiJr9KAeJboeM6O _1pdGDkt2C-GSflNRE9HkEM _3ZpPE5ZwvUy6QGtl56rIQ6 _1_0OCKKJH6gPamSl7zmIss">Pending</div>';
               } elseif ($data->status == 2) {
                  $status = '<div style="background-color:#ffc107" class="_1zXei-ymiJr9KAeJboeM6O _1pdGDkt2C-GSflNRE9HkEM _3ZpPE5ZwvUy6QGtl56rIQ6 _1_0OCKKJH6gPamSl7zmIss">Declined</div>';
               } elseif ($data->status == 3) {
                  $status = '<div style="background-color:#5bc0de" class="_1zXei-ymiJr9KAeJboeM6O _1pdGDkt2C-GSflNRE9HkEM _3ZpPE5ZwvUy6QGtl56rIQ6 _1_0OCKKJH6gPamSl7zmIss">Paid</div>';
               } elseif ($data->status == 4) {
                  $status = '<div  class="_1zXei-ymiJr9KAeJboeM6O btn-success _1pdGDkt2C-GSflNRE9HkEM _3ZpPE5ZwvUy6QGtl56rIQ6 _1_0OCKKJH6gPamSl7zmIss">Approved</div>';
               }
               ?>
               <tr role="row">
                  <td role="cell" class="d-flex justify-content-center align-items-center">
                     <?php if ($data->status == 1): ?>
                        <input type="checkbox" name="approved_id[]" class="check" value="<?= $data->id; ?>" <?= $data->status == 1 ? '' : 'disabled' ?>>
                     <?php elseif ($data->status == 2): ?>
                        <input type="checkbox" name="approved_id[]" class="check" value="<?= $data->id; ?>">
                     <?php elseif ($data->status == 3): ?>
                        <!-- pay -->
                        <i class="fa fa-check" style="color: #5bc0de;font-size:20px;"></i>
                     <?php elseif ($data->status == 4): ?>
                        <input type="checkbox" name="approved_id[]" class="check" value="<?= $data->id; ?>">
                     <?php endif; ?>
                  </td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->id ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= date('Y-m-d H:i:s', strtotime($data->date)) ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->offerid ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->oname ?></span></span></td>
                  <td role="cell">
                     <span class="_1zXei-ymiJr9KAeJboeM6O _1YEl4yCJEz0C3EFWAe9CjL _12Q8g8DFKS_2KPGPVMUHyl">
                        <img src="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.4.3/flags/4x3/<?= strtolower($data->countries) ?>.svg" style="display: inline-block; width: 1em; height: 1em; vertical-align: middle;">
                        <span class="_1WOmcSS9N_e3KUkqfV0NI"><?= "$data->cities $data->ip" ?></span></span>
                  </td>
                  <td role="cell">
                     <span>
                        <?= str_replace(' ', '', "$data->device_type $data->device_model ($data->browser)") ?>
                     </span>
                  </td>
                  <td role="cell"><?= $status ?></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->amount3 ?> USD</span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->s1 ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->s2 ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->s3 ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->s4 ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->userid ?></span></span></td>
                  <td role="cell">
                     <span class="_1zXei-ymiJr9KAeJboeM6O _3ZpPE5ZwvUy6QGtl56rIQ6" data-bs-toggle="tooltip" title="<?= $data->useragent ?>">
                        <p data-tip="Mozilla/5.0 (Windows NT 6.0; rv:45.0) Gecko/20100101 Firefox/45.0" currentitem="false">
                           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="">
                              <circle cx="12" cy="12" r="10"></circle>
                              <line x1="12" y1="16" x2="12" y2="12"></line>
                              <line x1="12" y1="8" x2="12.01" y2="8"></line>
                           </svg>
                        </p>
                     </span>
                  </td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= str_replace(",", ", ", $data->traffic_source) ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI">
                        <?php
                        $message = '';
                        $message .= $data->duplicate_ip ? "Duplicated IP <br>" : "";
                        $message .= $data->duplicate_device ? "Duplicated Device <br>" : "";
                        $message .= $data->diff_language ? "Difference Languages <br>" : "";
                        ?>
                        <?php if ($data->duplicate_ip || ($data->duplicate_device && $data->diff_language)) : ?>
                           <span data-bs-toggle="tooltip" data-bs-html="true" title="<?= $message ?>"><i class="fa fa-flag" style="color: red;font-size:20px;"></i></span>
                        <?php elseif ($data->duplicate_device || $data->diff_language) : ?>
                           <span data-bs-toggle="tooltip" data-bs-html="true" title="<?= $message ?>"><i class="fa fa-flag" style="color: #FFD700;font-size:20px;"></i></span>
                        <?php else : ?>
                           <span><i class="fa fa-flag" data-bs-toggle="tooltip" data-bs-html="true" title="
                              Your quality has met the basic requirements.<br>
                              No duplicate IP in same product. <br>
                              No duplicate device and user agent less than 2 times in offer <br>
                              User_language and IP same region" style="color: #008000;font-size:20px;"></i></span>
                        <?php endif; ?>
                  </td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->lead_amount ?></span></span></td>
                  <td role="cell"><span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI"><span><?= $data->click_url ?></span></span></td>
                  <td role="cell">
                     <span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI">
                        <span>
                           <?php echo in_array($data->status, [1]) ? adv_status_convert($data->paymterm_calc, $data->date, $data->confirm_date, 'confirm-' . $data->id) : '' ?>
                        </span>
                     </span>
                  </td>
                  <td role="cell">
                     <span class="_1zXei-ymiJr9KAeJboeM6O _2qzGcj9CQQHZm8SCJRN_wI">
                        <span>
                           <?php echo in_array($data->status, [1, 4]) ? adv_status_convert($data->paymterm_calc, $data->date, $data->hold_period, 'pay-' . $data->id) : (in_array($data->status, [3]) ? '<h6><span class="badge bg-info">Paid</span></h6>' : '') ?>
                        </span>
                     </span>
                  </td>
               </tr>

            <?php endforeach; ?>
         </tbody>
      </table>
   </div>
</div>

<script>
   function updateCountdown() {
      const now = Math.floor(Date.now() / 1000);

      document.querySelectorAll('.countdown-badge').forEach(function(element) {
         const target = parseInt(element.getAttribute('data-target'));
         const tooltip = element.getAttribute('data-tooltip');
         const uniqueId = element.getAttribute('id');

         if (!target) return;

         const diff = target - now;

         if (diff <= 0) {
            element.textContent = 'Expired';
            return;
         }

         const days = Math.floor(diff / 86400);
         const hours = Math.floor((diff % 86400) / 3600);
         const minutes = Math.floor((diff % 3600) / 60);
         const seconds = diff % 60;

         let timeText = '';
         if (days > 0) {
            timeText = `${days}d ${hours}h ${minutes}m`;
         } else if (hours > 0) {
            timeText = `${hours}h ${minutes}m ${seconds}s`;
         } else {
            timeText = `${minutes}m ${seconds}s`;
         }

         element.textContent = timeText;

         let smartTooltip = '';
         if (tooltip && tooltip.includes('Expires:')) {
            const expireDate = tooltip.split('Expires: ')[1];
            smartTooltip = `Delayed. Will expire on: ${expireDate}`;
         } else if (tooltip && tooltip.includes('Target:')) {
            const targetDate = tooltip.split('Target: ')[1];
            smartTooltip = `Deadline on: ${targetDate}`;
         } else {
            smartTooltip = `Countdown: ${timeText}`;
         }

         element.setAttribute('title', smartTooltip);
      });
   }

   document.addEventListener('DOMContentLoaded', function() {
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      var tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
         return new bootstrap.Tooltip(tooltipTriggerEl, {
            html: false,
            placement: 'top',
            trigger: 'hover focus',
            delay: {
               "show": 200,
               "hide": 100
            },
            template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner" style="max-width: 300px; text-align: left; white-space: pre-line;"></div></div>'
         })
      });

      updateCountdown();
      setInterval(updateCountdown, 1000);
   });

   const style = document.createElement('style');
   style.textContent = `
      .countdown-badge {
         font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Courier New', monospace;
         font-weight: 500;
         min-width: 100px;
         text-align: center;
         letter-spacing: 0.5px;
         border-radius: 6px;
         transition: all 0.2s ease;
      }
      
      .countdown-badge:hover {
         transform: translateY(-1px);
         box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      }
      
      .tooltip-inner {
         background-color: #333 !important;
         color: white !important;
         border-radius: 6px !important;
         padding: 8px 12px !important;
         font-size: 0.875rem !important;
         line-height: 1.4 !important;
      }
      
      .tooltip.show {
         opacity: 0.95 !important;
      }
      
      [data-bs-toggle="tooltip"] {
         cursor: help !important;
      }
      `;
   document.head.appendChild(style);
</script>